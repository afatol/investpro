(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[682],{1939:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>n});var t=r(7876),i=r(4232),a=r(2829),o=r(7882);function n(){let[e,s]=(0,i.useState)({1:0,2:0}),[r,n]=(0,i.useState)({users:[],total:0}),[d,l]=(0,i.useState)({users:[],total:0}),[c,h]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{(async()=>{let{data:{session:e}}=await a.N.auth.getSession();if(!e)return window.location.href="/login";let r=e.user.id,{data:t}=await a.N.from("referral_configs").select("*"),i={};t.forEach(e=>i[e.level]=parseFloat(e.percentage)),s(i);let{data:o}=await a.N.from("user_profiles").select("user_id").eq("referred_by",r),d=0;n({users:await Promise.all(o.map(async e=>{let{user_id:s}=e,{data:r}=await a.N.from("transactions").select("amount, type").eq("user_id",s).eq("status","approved"),t=r.reduce((e,s)=>e+("deposit"===s.type||"rendimento"===s.type?parseFloat(s.amount):0),0),o=t*(i[1]/100);return d+=o,{user_id:s,movimentado:t,comissao:o}})),total:d});let c=0,u=[];for(let{user_id:e}of o){let{data:s}=await a.N.from("user_profiles").select("user_id").eq("referred_by",e);for(let{user_id:e}of s){let{data:s}=await a.N.from("transactions").select("amount, type").eq("user_id",e).eq("status","approved"),r=s.reduce((e,s)=>e+("deposit"===s.type||"rendimento"===s.type?parseFloat(s.amount):0),0),t=r*(i[2]/100);c+=t,u.push({user_id:e,movimentado:r,comissao:t})}}l({users:u,total:c}),h(!1)})()},[]),c)?(0,t.jsx)("p",{className:"container",children:"Carregando minha rede…"}):(0,t.jsxs)("div",{className:"container",children:[(0,t.jsx)(o.A,{}),(0,t.jsx)("h1",{children:"Minha Rede"}),(0,t.jsxs)("section",{children:[(0,t.jsxs)("h2",{children:["N\xedvel 1 (",e[1],"%)"]}),r.users.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("ul",{children:r.users.map(e=>(0,t.jsxs)("li",{children:["Usu\xe1rio ",(0,t.jsx)("strong",{children:e.user_id})," – Mov.: $",e.movimentado.toFixed(2)," – Comiss\xe3o: $",e.comissao.toFixed(2)]},e.user_id))}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Total N\xedvel 1:"})," $",r.total.toFixed(2)]})]}):(0,t.jsx)("p",{children:"Voc\xea n\xe3o indicou ningu\xe9m ainda."})]}),(0,t.jsxs)("section",{style:{marginTop:"2rem"},children:[(0,t.jsxs)("h2",{children:["N\xedvel 2 (",e[2],"%)"]}),d.users.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("ul",{children:d.users.map(e=>(0,t.jsxs)("li",{children:["Usu\xe1rio ",(0,t.jsx)("strong",{children:e.user_id})," – Mov.: $",e.movimentado.toFixed(2)," – Comiss\xe3o: $",e.comissao.toFixed(2)]},e.user_id))}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Total N\xedvel 2:"})," $",d.total.toFixed(2)]})]}):(0,t.jsx)("p",{children:"Sem usu\xe1rios no segundo n\xedvel."})]})]})}},2829:(e,s,r)=>{"use strict";r.d(s,{N:()=>t});let t=(0,r(6879).UU)("https://fkjglcimmaomxdmhmled.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZramdsY2ltbWFvbXhkbWhtbGVkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU4NDIwODksImV4cCI6MjA2MTQxODA4OX0.u7pzHGRwpLzCNbpyoeK1fysTtlZ7lpeZw4AdDmWu9oM")},2872:(e,s,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/rede",function(){return r(1939)}])},7882:(e,s,r)=>{"use strict";r.d(s,{A:()=>d});var t=r(7876),i=r(4587),a=r.n(i),o=r(8230),n=r.n(o);function d(){return(0,t.jsxs)("header",{className:"header",children:[(0,t.jsx)("div",{className:"logo-container",children:(0,t.jsx)(n(),{href:"/",children:(0,t.jsx)(a(),{src:"/logo.png",alt:"InvestPro",width:140,height:40,priority:!0})})}),(0,t.jsxs)("nav",{children:[(0,t.jsx)(n(),{href:"/dashboard",children:"Dashboard"}),(0,t.jsx)(n(),{href:"/planos",children:"Planos"}),(0,t.jsx)(n(),{href:"/deposit",children:"Depositar"}),(0,t.jsx)(n(),{href:"/withdraw",children:"Sacar"}),(0,t.jsx)(n(),{href:"/rede",children:"Minha Rede"}),(0,t.jsx)(n(),{href:"/sobre",children:"Sobre"}),(0,t.jsx)(n(),{href:"/manual",children:"Manual de Uso"}),(0,t.jsx)(n(),{href:"/logout",children:"Sair"})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[879,92,636,593,792],()=>s(2872)),_N_E=e.O()}]);