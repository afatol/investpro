(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[791],{2829:(e,s,a)=>{"use strict";a.d(s,{N:()=>r});let r=(0,a(6879).UU)("https://fkjglcimmaomxdmhmled.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZramdsY2ltbWFvbXhkbWhtbGVkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU4NDIwODksImV4cCI6MjA2MTQxODA4OX0.u7pzHGRwpLzCNbpyoeK1fysTtlZ7lpeZw4AdDmWu9oM")},5120:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/planos",function(){return a(9276)}])},7882:(e,s,a)=>{"use strict";a.d(s,{A:()=>d});var r=a(7876),i=a(4587),n=a.n(i),t=a(8230),l=a.n(t);function d(){return(0,r.jsxs)("header",{className:"header",children:[(0,r.jsx)("div",{className:"logo-container",children:(0,r.jsx)(l(),{href:"/",children:(0,r.jsx)(n(),{src:"/logo.png",alt:"InvestPro",width:140,height:40,priority:!0})})}),(0,r.jsxs)("nav",{children:[(0,r.jsx)(l(),{href:"/dashboard",children:"Dashboard"}),(0,r.jsx)(l(),{href:"/planos",children:"Planos"}),(0,r.jsx)(l(),{href:"/deposit",children:"Depositar"}),(0,r.jsx)(l(),{href:"/withdraw",children:"Sacar"}),(0,r.jsx)(l(),{href:"/rede",children:"Minha Rede"}),(0,r.jsx)(l(),{href:"/sobre",children:"Sobre"}),(0,r.jsx)(l(),{href:"/manual",children:"Manual de Uso"}),(0,r.jsx)(l(),{href:"/logout",children:"Sair"})]})]})}},9276:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>l});var r=a(7876),i=a(4232),n=a(2829),t=a(7882);function l(){let[e,s]=(0,i.useState)([]),[a,l]=(0,i.useState)(null),[d,o]=(0,i.useState)(""),[c,h]=(0,i.useState)(""),[u,p]=(0,i.useState)("");(0,i.useEffect)(()=>{(async()=>{var e;let{data:{session:a}}=await n.N.auth.getSession();if(!a)return window.location.href="/login";let{data:r}=await n.N.from("plans").select("id, name, frequency");s(r);let{data:i}=await n.N.from("user_profiles").select("plan_id, invest_amount").eq("user_id",a.user.id).maybeSingle();if(!i){let e="Fx"+Math.random().toString(36).slice(2,8).toUpperCase(),{data:s}=await n.N.from("user_profiles").insert({user_id:a.user.id,referral_code:e}).single();i=s}l(i),o(i.plan_id),h((null==(e=i.invest_amount)?void 0:e.toString())||"")})()},[]);let m=async e=>{e.preventDefault(),p("");let{data:{session:s}}=await n.N.auth.getSession();if(!s)return;let{error:a}=await n.N.from("user_profiles").update({plan_id:d,invest_amount:parseFloat(c)}).eq("user_id",s.user.id);a?p(a.message):alert("Plano e valor atualizados com sucesso!")};return a?(0,r.jsxs)("div",{className:"container",children:[(0,r.jsx)(t.A,{}),(0,r.jsx)("h1",{children:"Escolha seu Plano"}),u&&(0,r.jsx)("p",{style:{color:"red"},children:u}),(0,r.jsxs)("form",{onSubmit:m,children:[(0,r.jsx)("div",{className:"plans-grid",children:e.map(e=>(0,r.jsxs)("div",{className:"plan-card ".concat(d===e.id?"selected":""),onClick:()=>o(e.id),children:[(0,r.jsx)("h2",{children:e.name}),(0,r.jsx)("p",{children:e.frequency}),d===e.id&&(0,r.jsx)("small",{children:"Selecionado"})]},e.id))}),(0,r.jsxs)("label",{children:["Valor a investir (USD):",(0,r.jsx)("input",{type:"number",value:c,required:!0,onChange:e=>h(e.target.value)})]}),(0,r.jsx)("button",{className:"btn",type:"submit",children:"Salvar"})]})]}):(0,r.jsx)("p",{className:"container",children:"Carregando..."})}}},e=>{var s=s=>e(e.s=s);e.O(0,[879,92,636,593,792],()=>s(5120)),_N_E=e.O()}]);